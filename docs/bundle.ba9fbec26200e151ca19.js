!function(e){function t(t){for(var r,a,u=t[0],l=t[1],c=t[2],s=0,p=[];s<u.length;s++)a=u[s],Object.prototype.hasOwnProperty.call(o,a)&&o[a]&&p.push(o[a][0]),o[a]=0;for(r in l)Object.prototype.hasOwnProperty.call(l,r)&&(e[r]=l[r]);for(f&&f(t);p.length;)p.shift()();return i.push.apply(i,c||[]),n()}function n(){for(var e,t=0;t<i.length;t++){for(var n=i[t],r=!0,u=1;u<n.length;u++){var l=n[u];0!==o[l]&&(r=!1)}r&&(i.splice(t--,1),e=a(a.s=n[0]))}return e}var r={},o={0:0},i=[];function a(t){if(r[t])return r[t].exports;var n=r[t]={i:t,l:!1,exports:{}};return e[t].call(n.exports,n,n.exports,a),n.l=!0,n.exports}a.m=e,a.c=r,a.d=function(e,t,n){a.o(e,t)||Object.defineProperty(e,t,{enumerable:!0,get:n})},a.r=function(e){"undefined"!=typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(e,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(e,"__esModule",{value:!0})},a.t=function(e,t){if(1&t&&(e=a(e)),8&t)return e;if(4&t&&"object"==typeof e&&e&&e.__esModule)return e;var n=Object.create(null);if(a.r(n),Object.defineProperty(n,"default",{enumerable:!0,value:e}),2&t&&"string"!=typeof e)for(var r in e)a.d(n,r,function(t){return e[t]}.bind(null,r));return n},a.n=function(e){var t=e&&e.__esModule?function(){return e.default}:function(){return e};return a.d(t,"a",t),t},a.o=function(e,t){return Object.prototype.hasOwnProperty.call(e,t)},a.p="";var u=window.webpackJsonp=window.webpackJsonp||[],l=u.push.bind(u);u.push=t,u=u.slice();for(var c=0;c<u.length;c++)t(u[c]);var f=l;i.push([1469,1]),n()}({1469:function(e,t,n){"use strict";n.r(t);var r=n(39),o=n.n(r),i=n.p+"assets/roadTextures.png";function a(e){return(a="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function u(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function l(e,t){return!t||"object"!==a(t)&&"function"!=typeof t?function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(e):t}function c(e){return(c=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}function f(e,t){return(f=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}var s,p=function(e){function t(){return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t),l(this,c(t).call(this,{key:"Boot"}))}var n,r,o;return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&f(e,t)}(t,e),n=t,(r=[{key:"preload",value:function(){var e=this.add.graphics();this.load.on("fileprogress",(function(t,n){e.clear(),e.fillStyle(16777215,.75),e.fillRect(700-600*n,250,600*n,100)})),this.load.spritesheet("roadTextures",i,{frameWidth:128,frameHeight:128})}},{key:"create",value:function(){this.scene.start("Game")}}])&&u(n.prototype,r),o&&u(n,o),t}(o.a.Scene);function d(e){return(d="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function y(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function h(e,t){return!t||"object"!==d(t)&&"function"!=typeof t?function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(e):t}function w(e){return(w=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}function g(e,t){return(g=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}var b="\n1111111\n1111111\n1109018\n1100011\n1100011\n".trim().split("\n").map((function(e){return e.trim().split("").map((function(e){return parseInt(e,10)}))})),v=b.map((function(e){return e.map((function(e){return 0===e?-1:0}))})),m=b.map((function(e){return e.map((function(e){return 1===e}))}));console.log(m);var O=[];function x(e){e.validMoves={left:m[e.y]&&m[e.y][e.x-1]||!1,right:m[e.y]&&m[e.y][e.x+1]||!1,up:m[e.y-1]&&m[e.y-1][e.x]||!1,down:m[e.y+1]&&m[e.y+1][e.x]||!1},O.forEach((function(t){e.validMoves.left=e.validMoves.left&&!(t.x===e.x-1&&t.y===e.y),e.validMoves.right=e.validMoves.right&&!(t.x===e.x+1&&t.y===e.y)}))}window.players=O;var j=[],S=function(e){function t(){return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t),h(this,w(t).call(this,{key:"Game"}))}var n,r,i;return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&g(e,t)}(t,e),n=t,(r=[{key:"eat",value:function(e,t,n,r){var o=0;"left"!==n||"left"!==j[r]&&j[r]||(o=12),"right"!==n||"right"!==j[r]&&j[r]||(o=12),"left"===n&&"up"===j[r]&&(o=2),"left"===n&&"down"===j[r]&&(o=14),"right"===n&&"down"===j[r]&&(o=13),"up"===n&&"left"===j[r]&&(o=13),"up"===n&&"right"===j[r]&&(o=14),"right"===n&&"up"===j[r]&&(o=1),"down"===n&&"left"===j[r]&&(o=1),"down"===n&&"right"===j[r]&&(o=2),m[t][e]=!1,v[t][e]=o,window.group.add(this.add.sprite(128*e,128*t,"roadTextures",o).setOrigin(.5)),j[r]=n}},{key:"create",value:function(){var e;this.swipeInput=this.rexGestures.add.swipe({dir:"4dir",velocityThreshold:1e3}),this.scale.lockOrientation("portrait"),this.cameras.main.backgroundColor=o.a.Display.Color.HexStringToColor("#67caf5"),this.animationsEnd=!0,window.group=this.add.container();for(var t=0;t<b.length;t+=1){console.log(t);for(var n=0;n<b[0].length;n+=1)b[t][n]>0&&(e=this.add.sprite(128*n,128*t,"roadTextures",24).setOrigin(.5),window.group.add(e)),2===b[t][n]||b[t][n],b[t][n]>5&&(s=this.add.container(),window.p=s,window.rect=this.add.rectangle(128*n,128*t,128,128,16711680).setOrigin(.5),s.add(window.rect),window.circle=this.add.circle(128*n,128*t,25.6,16776960).setOrigin(.5),s.add(window.circle),window.group.add(s),O.push({player:s,x:n,y:t}))}O.forEach((function(e){window.group.bringToTop(e.player),x(e)})),window.group.setX(parseInt((1500-128*(b[0].length-1))/2)),window.group.setY((2668-128*(b.length-1))/2)}},{key:"move",value:function(e){var t=this,n=function(){t.animationsEnd=!0};O.forEach((function(r,o){if(r.validMoves[e]){t.animationsEnd=!1;var i=r.player.x,a=r.player.y,u={up:-1,down:1,left:-1,right:1};t.eat(r.x,r.y,e,o),["up","down"].includes(e)?(a=r.player.y+128*u[e],r.y=r.y+u[e]):(i=r.player.x+128*u[e],r.x=r.x+u[e]),window.group.bringToTop(r.player),t.tweens.add({targets:r.player,x:i,y:a,onComplete:n,duration:300,ease:"Power2"})}})),O.forEach((function(n,r){if(x(n),0===Object.values(n.validMoves).filter((function(e){return e})).length){if(n.killed)return;t.eat(n.x,n.y,e,r),window.group.bringToTop(n.player),t.tweens.add({targets:n.player,alpha:.4,duration:300,ease:"Power2"}),n.killed=!0}}))}},{key:"update",value:function(){if(this.animationsEnd){var e=this.input.keyboard.createCursorKeys();if(e.up.isDown?this.move("up"):e.down.isDown?this.move("down"):e.right.isDown?this.move("right"):e.left.isDown&&this.move("left"),this.swipeInput.isSwiped)for(var t,n=["left","right","up","down"],r=0,o=n.length;r<o;r++)t=n[r],this.swipeInput[t]&&this.move(t)}}}])&&y(n.prototype,r),i&&y(n,i),t}(o.a.Scene),_=n(551),T={type:o.a.AUTO,scale:{mode:o.a.Scale.FIT,autoCenter:o.a.Scale.CENTER_BOTH},parent:"phaser-example",width:1500,height:2668,scene:[p,S],plugins:{scene:[{key:"rexGestures",plugin:_.a,mapping:"rexGestures"}]}};new o.a.Game(T)}});
//# sourceMappingURL=bundle.ba9fbec26200e151ca19.js.map