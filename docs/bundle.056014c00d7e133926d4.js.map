{"version":3,"sources":["webpack:///webpack/bootstrap","webpack:///./assets/roadTextures.png","webpack:///./src/scenes/Game.js","webpack:///./src/scenes/Boot.js","webpack:///./src/index.js"],"names":["webpackJsonpCallback","data","moduleId","chunkId","chunkIds","moreModules","executeModules","i","resolves","length","Object","prototype","hasOwnProperty","call","installedChunks","push","modules","parentJsonpFunction","shift","deferredModules","apply","checkDeferredModules","result","deferredModule","fulfilled","j","depId","splice","__webpack_require__","s","installedModules","0","exports","module","l","m","c","d","name","getter","o","defineProperty","enumerable","get","r","Symbol","toStringTag","value","t","mode","__esModule","ns","create","key","bind","n","object","property","p","jsonpArray","window","oldJsonpFunction","slice","player","progress","this","add","graphics","load","on","file","clear","fillStyle","fillRect","spritesheet","roadTextures","frameWidth","frameHeight","scene","start","Phaser","Scene","map","trim","split","e","parseInt","mapTiles","validMoves","console","log","players","calculateMoves","left","y","x","right","up","down","forEach","prev","from","pId","defaultSprite","group","sprite","setOrigin","scale","lockOrientation","cameras","main","backgroundColor","Display","Color","HexStringToColor","animationsEnd","container","rect","rectangle","circle","gridSize","bringToTop","setX","setY","direction","onComplete","mul","eat","includes","tweens","targets","duration","ease","values","filter","killed","alpha","cursors","input","keyboard","createCursorKeys","isDown","move","config","type","AUTO","Scale","FIT","autoCenter","CENTER_BOTH","parent","width","height","Boot","Game"],"mappings":"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","file":"bundle.056014c00d7e133926d4.js","sourcesContent":[" \t// install a JSONP callback for chunk loading\n \tfunction webpackJsonpCallback(data) {\n \t\tvar chunkIds = data[0];\n \t\tvar moreModules = data[1];\n \t\tvar executeModules = data[2];\n\n \t\t// add \"moreModules\" to the modules object,\n \t\t// then flag all \"chunkIds\" as loaded and fire callback\n \t\tvar moduleId, chunkId, i = 0, resolves = [];\n \t\tfor(;i < chunkIds.length; i++) {\n \t\t\tchunkId = chunkIds[i];\n \t\t\tif(Object.prototype.hasOwnProperty.call(installedChunks, chunkId) && installedChunks[chunkId]) {\n \t\t\t\tresolves.push(installedChunks[chunkId][0]);\n \t\t\t}\n \t\t\tinstalledChunks[chunkId] = 0;\n \t\t}\n \t\tfor(moduleId in moreModules) {\n \t\t\tif(Object.prototype.hasOwnProperty.call(moreModules, moduleId)) {\n \t\t\t\tmodules[moduleId] = moreModules[moduleId];\n \t\t\t}\n \t\t}\n \t\tif(parentJsonpFunction) parentJsonpFunction(data);\n\n \t\twhile(resolves.length) {\n \t\t\tresolves.shift()();\n \t\t}\n\n \t\t// add entry modules from loaded chunk to deferred list\n \t\tdeferredModules.push.apply(deferredModules, executeModules || []);\n\n \t\t// run deferred modules when all chunks ready\n \t\treturn checkDeferredModules();\n \t};\n \tfunction checkDeferredModules() {\n \t\tvar result;\n \t\tfor(var i = 0; i < deferredModules.length; i++) {\n \t\t\tvar deferredModule = deferredModules[i];\n \t\t\tvar fulfilled = true;\n \t\t\tfor(var j = 1; j < deferredModule.length; j++) {\n \t\t\t\tvar depId = deferredModule[j];\n \t\t\t\tif(installedChunks[depId] !== 0) fulfilled = false;\n \t\t\t}\n \t\t\tif(fulfilled) {\n \t\t\t\tdeferredModules.splice(i--, 1);\n \t\t\t\tresult = __webpack_require__(__webpack_require__.s = deferredModule[0]);\n \t\t\t}\n \t\t}\n\n \t\treturn result;\n \t}\n\n \t// The module cache\n \tvar installedModules = {};\n\n \t// object to store loaded and loading chunks\n \t// undefined = chunk not loaded, null = chunk preloaded/prefetched\n \t// Promise = chunk loading, 0 = chunk loaded\n \tvar installedChunks = {\n \t\t0: 0\n \t};\n\n \tvar deferredModules = [];\n\n \t// The require function\n \tfunction __webpack_require__(moduleId) {\n\n \t\t// Check if module is in cache\n \t\tif(installedModules[moduleId]) {\n \t\t\treturn installedModules[moduleId].exports;\n \t\t}\n \t\t// Create a new module (and put it into the cache)\n \t\tvar module = installedModules[moduleId] = {\n \t\t\ti: moduleId,\n \t\t\tl: false,\n \t\t\texports: {}\n \t\t};\n\n \t\t// Execute the module function\n \t\tmodules[moduleId].call(module.exports, module, module.exports, __webpack_require__);\n\n \t\t// Flag the module as loaded\n \t\tmodule.l = true;\n\n \t\t// Return the exports of the module\n \t\treturn module.exports;\n \t}\n\n\n \t// expose the modules object (__webpack_modules__)\n \t__webpack_require__.m = modules;\n\n \t// expose the module cache\n \t__webpack_require__.c = installedModules;\n\n \t// define getter function for harmony exports\n \t__webpack_require__.d = function(exports, name, getter) {\n \t\tif(!__webpack_require__.o(exports, name)) {\n \t\t\tObject.defineProperty(exports, name, { enumerable: true, get: getter });\n \t\t}\n \t};\n\n \t// define __esModule on exports\n \t__webpack_require__.r = function(exports) {\n \t\tif(typeof Symbol !== 'undefined' && Symbol.toStringTag) {\n \t\t\tObject.defineProperty(exports, Symbol.toStringTag, { value: 'Module' });\n \t\t}\n \t\tObject.defineProperty(exports, '__esModule', { value: true });\n \t};\n\n \t// create a fake namespace object\n \t// mode & 1: value is a module id, require it\n \t// mode & 2: merge all properties of value into the ns\n \t// mode & 4: return value when already ns object\n \t// mode & 8|1: behave like require\n \t__webpack_require__.t = function(value, mode) {\n \t\tif(mode & 1) value = __webpack_require__(value);\n \t\tif(mode & 8) return value;\n \t\tif((mode & 4) && typeof value === 'object' && value && value.__esModule) return value;\n \t\tvar ns = Object.create(null);\n \t\t__webpack_require__.r(ns);\n \t\tObject.defineProperty(ns, 'default', { enumerable: true, value: value });\n \t\tif(mode & 2 && typeof value != 'string') for(var key in value) __webpack_require__.d(ns, key, function(key) { return value[key]; }.bind(null, key));\n \t\treturn ns;\n \t};\n\n \t// getDefaultExport function for compatibility with non-harmony modules\n \t__webpack_require__.n = function(module) {\n \t\tvar getter = module && module.__esModule ?\n \t\t\tfunction getDefault() { return module['default']; } :\n \t\t\tfunction getModuleExports() { return module; };\n \t\t__webpack_require__.d(getter, 'a', getter);\n \t\treturn getter;\n \t};\n\n \t// Object.prototype.hasOwnProperty.call\n \t__webpack_require__.o = function(object, property) { return Object.prototype.hasOwnProperty.call(object, property); };\n\n \t// __webpack_public_path__\n \t__webpack_require__.p = \"\";\n\n \tvar jsonpArray = window[\"webpackJsonp\"] = window[\"webpackJsonp\"] || [];\n \tvar oldJsonpFunction = jsonpArray.push.bind(jsonpArray);\n \tjsonpArray.push = webpackJsonpCallback;\n \tjsonpArray = jsonpArray.slice();\n \tfor(var i = 0; i < jsonpArray.length; i++) webpackJsonpCallback(jsonpArray[i]);\n \tvar parentJsonpFunction = oldJsonpFunction;\n\n\n \t// add entry module to deferred list\n \tdeferredModules.push([1467,1]);\n \t// run deferred modules when ready\n \treturn checkDeferredModules();\n","export default __webpack_public_path__ + \"assets/roadTextures.png\";","import Phaser from 'phaser'\n\nlet player\n\nconst map = `\n1111111\n1111111\n1109018\n1100011\n1100011\n`.trim().split('\\n').map(e => e.trim().split('').map(e => parseInt(e, 10)))\n\nconst mapTiles = map.map(r => r.map(e => {\n  return e === 0 ? -1 : 0\n}))\n\nconst validMoves = map.map(r => r.map(e => e === 1))\nconsole.log(validMoves)\nconst players = []\nconst gridSize = 128\nwindow.players = players\nfunction calculateMoves (player) {\n  player.validMoves = {\n    left: (validMoves[player.y] && validMoves[player.y][player.x - 1]) || false,\n    right: (validMoves[player.y] && validMoves[player.y][player.x + 1]) || false,\n    up: (validMoves[player.y - 1] && validMoves[player.y - 1][player.x]) || false,\n    down: (validMoves[player.y + 1] && validMoves[player.y + 1][player.x]) || false\n  }\n  players.forEach(p => {\n    player.validMoves.left = player.validMoves.left && (!(p.x === (player.x - 1) && p.y === player.y))\n    player.validMoves.right = player.validMoves.right && (!(p.x === (player.x + 1) && p.y === player.y))\n  })\n}\n\nconst prev = []\nexport default class extends Phaser.Scene {\n  constructor () {\n    super({ key: 'Game' })\n  }\n\n  eat (j, i, from, pId) {\n    let defaultSprite = 0\n    if (from === 'left' && (prev[pId] === 'left' || !prev[pId])) {\n      defaultSprite = 12\n    }\n    if (from === 'right' && (prev[pId] === 'right' || !prev[pId])) {\n      defaultSprite = 12\n    }\n    if (from === 'left' && prev[pId] === 'up') {\n      defaultSprite = 2\n    }\n    if (from === 'left' && prev[pId] === 'down') {\n      defaultSprite = 14\n    }\n    if (from === 'right' && prev[pId] === 'down') {\n      defaultSprite = 13\n      // 9\n      // 12\n    }\n    if (from === 'up' && prev[pId] === 'left') {\n      defaultSprite = 13\n    }\n    if (from === 'up' && prev[pId] === 'right') {\n      defaultSprite = 14\n    }\n    if (from === 'right' && prev[pId] === 'up') {\n      defaultSprite = 1\n    }\n    if (from === 'down' && prev[pId] === 'left') {\n      defaultSprite = 1\n    }\n    if (from === 'down' && prev[pId] === 'right') {\n      defaultSprite = 2\n    }\n    validMoves[i][j] = false\n    mapTiles[i][j] = defaultSprite\n    window.group.add(this.add.sprite(gridSize * j, gridSize * i, 'roadTextures', defaultSprite).setOrigin(0.5))\n    prev[pId] = from\n  }\n\n  create () {\n    this.scale.lockOrientation('portrait')\n    this.cameras.main.backgroundColor = Phaser.Display.Color.HexStringToColor('#67caf5')\n    this.animationsEnd = true\n    window.group = this.add.container()\n    // window.group.setOrigin(0.5, 0.5)\n    // window.group.setX(100)\n    let r\n\n    for (let i = 0; i < map.length; i += 1) {\n      console.log(i)\n      for (let j = 0; j < map[0].length; j += 1) {\n        if (map[i][j] > 0) {\n          // r = this.add.rectangle(gridSize * j, gridSize * i, gridSize, gridSize, 0x6666ff).setOrigin(0.5)\n          r = this.add.sprite(gridSize * j, gridSize * i, 'roadTextures', 24).setOrigin(0.5)\n          // r.setScale(0.5, 0.5)\n          // r.setStrokeStyle(1, 0xffff00, 0.5)\n          window.group.add(r)\n        }\n        if (map[i][j] === 2 || map[i][j] > 5) {\n          // pintado\n          // this.eat(j, i)\n        }\n        if (map[i][j] > 5) {\n          player = this.add.container()\n          window.p = player\n\n          window.rect = this.add.rectangle(gridSize * j, gridSize * i, gridSize, gridSize, 0xff0000).setOrigin(0.5)\n          player.add(window.rect)\n          window.circle = this.add.circle(gridSize * j, gridSize * i, gridSize * 0.2, 0xffff00).setOrigin(0.5)\n          player.add(window.circle)\n          window.group.add(player)\n          players.push({ player, x: j, y: i })\n        }\n      }\n    }\n    players.forEach(p => {\n      window.group.bringToTop(p.player)\n      calculateMoves(p)\n    })\n\n    window.group.setX(parseInt(((375 * 4) - ((map[0].length - 1) * gridSize)) / 2))\n    window.group.setY(((667 * 4) - ((map.length - 1) * gridSize)) / 2)\n\n    /*\n    // window.group.add(this.add.rectangle(0, 0, 0, 40, 0x6666ff).setOrigin(0))\n    // window.group.add(this.add.rectangle(0, 0, 40, 40, 0x6666ff).setOrigin(0))\n\n    window.g = this.add.grid(screen.width / 2, screen.height / 2, gridWidth * gridSize, gridHeight * gridSize, gridSize, gridSize, 0x999999, 1, 0x666666).setOrigin(0.5, 0.5)\n\n    this.logo = new Logo(this, 400, 150)\n    this.tweens.add({\n      targets: this.logo,\n      y: 450,\n      duration: 2000,\n      ease: 'Power2',\n      yoyo: true,\n      loop: -1\n    })\n\n    this.mushroom = new Mushroom(this, 0, 0)\n    Phaser.Display.Align.In.Center(this.mushroom, this.add.zone(400, 300, 800, 600))\n    */\n  }\n\n  move (direction) {\n    const onComplete = () => {\n      this.animationsEnd = true\n    }\n\n    players.forEach((p, pId) => {\n      if (!p.validMoves[direction]) {\n        return\n      }\n      this.animationsEnd = false\n      let x = p.player.x\n      let y = p.player.y\n\n      const mul = {\n        up: -1,\n        down: +1,\n        left: -1,\n        right: +1\n      }\n      this.eat(p.x, p.y, direction, pId)\n      if (['up', 'down'].includes(direction)) {\n        y = p.player.y + (mul[direction] * gridSize)\n        p.y = p.y + mul[direction]\n      } else {\n        x = p.player.x + (mul[direction] * gridSize)\n        p.x = p.x + mul[direction]\n      }\n      window.group.bringToTop(p.player)\n\n      this.tweens.add({\n        targets: p.player,\n        x,\n        y,\n        onComplete,\n        duration: 300,\n        ease: 'Power2'\n      })\n    })\n\n    // despues de mover a los jugadores\n    players.forEach((p, pId) => {\n      calculateMoves(p)\n      if (Object.values(p.validMoves).filter(e => e).length === 0) {\n        if (p.killed) {\n          return\n        }\n        this.eat(p.x, p.y, direction, pId)\n        window.group.bringToTop(p.player)\n        this.tweens.add({\n          targets: p.player,\n          alpha: 0.4,\n          duration: 300,\n          ease: 'Power2'\n        })\n        p.killed = true\n      }\n    })\n  }\n\n  update () {\n    if (!this.animationsEnd) {\n      return\n    }\n\n    // this.mushroom.update()\n    const cursors = this.input.keyboard.createCursorKeys()\n    if (cursors.up.isDown) {\n      this.move('up')\n    } else if (cursors.down.isDown) {\n      this.move('down')\n    } else if (cursors.right.isDown) {\n      this.move('right')\n    } else if (cursors.left.isDown) {\n      this.move('left')\n    } else {\n      // reset anims\n    }\n  }\n}\n","import Phaser from 'phaser'\n\nimport roadTextures from 'roadTextures.png'\n// import mushroom from 'images/mushroom2.png'\n\nexport default class extends Phaser.Scene {\n  constructor () {\n    super({ key: 'Boot' })\n  }\n\n  preload () {\n    const progress = this.add.graphics()\n\n    this.load.on('fileprogress', (file, value) => {\n      progress.clear()\n      progress.fillStyle(0xffffff, 0.75)\n      progress.fillRect(700 - (value * 600), 250, value * 600, 100)\n    })\n\n    // this.load.image('road1', road1)\n    // this.load.image('mushroom', mushroom)\n    this.load.spritesheet('roadTextures',\n      // 'assets/dude.png',\n      roadTextures,\n      { frameWidth: 128, frameHeight: 128 }\n    )\n  }\n\n  create () {\n    this.scene.start('Game')\n  }\n}\n","import Phaser from 'phaser'\nimport { Boot, Game } from 'scenes'\n\nconst config = {\n  type: Phaser.AUTO,\n  scale: {\n    mode: Phaser.Scale.FIT,\n    autoCenter: Phaser.Scale.CENTER_BOTH\n  },\n  parent: 'phaser-example',\n  width: 375 * 4,\n  height: 667 * 4,\n  scene: [\n    Boot,\n    Game\n  ]\n}\n\nconst game = new Phaser.Game(config) // eslint-disable-line no-unused-vars\n"],"sourceRoot":""}